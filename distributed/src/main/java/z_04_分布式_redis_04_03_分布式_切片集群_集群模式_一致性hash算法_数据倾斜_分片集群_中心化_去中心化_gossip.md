##切片集群

###Hash Slot(16384)
```$xslt
首先根据键值对的 key，计算一个 16 bit 的值；然后，再用这个 16bit 值对 16384 取模，得到 0~16383 范围内的模数，
每个模数代表一个相应编号的哈希槽。
```

###16384背后的临界知识

###分配slot
```$xslt
Redis 会自动把这些槽平均分布在集群实例上。例如，如果集群中有 N 个实例，那么，每个实例上的槽个数为 16384/N 个。当然， 我们也可以使用 
cluster meet 命令手动建立实例间的连接，形成集群，再使用 cluster addslots 命令，指定每个实例上的哈希槽个数。
```

###数据与内存比例不均
```$xslt
假设集群中不同 Redis 实例的内存大小配置不一，如果把哈希槽均分在各个实例上，在保存相同数量的键值对时，和内存大的实例相比，内存小的实例就会有更大的容量压力。
遇到这种情况时，你可以根据不同实例的资源配置情况，使用 cluster addslots 命令手动分配哈希槽。
```
![](.z_04_分布式_redis_04_01_分布式_主从集群_主从从_备份同步_全量备份_增量备份_切片集群_一致性hash算法_数据倾斜_images/0b62eaeb.png)

###客户端定位节点
