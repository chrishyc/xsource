@ConfigurationProperties注解逻辑过程,主要逻辑在ConfigurationPropertiesBindingPostProcessor
##1.需求:
将application.properties中定义的属性注入到pojo类的属性中.pojo类属性名和application.properties中key相同
##2.方案:
对每个注入容器的实例,初始化构造方法以及set属性后,会调用容器中的BeanPostProcessor来处理当前实例.
因此我们可以向容器注入一个BeanPostProcessor来绑定配置文件中的属性即ConfigurationPropertiesBindingPostProcessor.

##3.实现：
1.过程
springbootapplication注解@ EnableAutoConfiguration会从spring.factories中读取ConfigurationPropertiesAutoConfiguration
spring会对每个@Configuration注解类分析@Import并导入注解信息缓存起来，ConfigurationPropertiesAutoConfiguration的注入类为EnableConfigurationPropertiesRegistrar.最后调用注入的Registrar方法,通过Registrar注入ConfigurationPropertiesBindingPostProcessor，用于后面每个实例的处理

解析@Configuration类
ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry->
解析@Configuration类注解信息AutoConfigurationImportSelector->
ConfigurationClassParser.processImports->
AutoConfigurationImportSelector.selectImports->

AutoConfigurationImportSelector从spring.factories中导入多个自动配置类,其中有ConfigurationPropertiesAutoConfiguration
AutoConfigurationImportSelector.getCandidateConfigurations()->

获取导入的配置类中的注解信息@EnableConfigurationProperties,并实例化其中的Selector,registrar，@Import(EnableConfigurationPropertiesRegistrar.class)，执行他们的方法，这些方法逻辑一般是向容器注入BeanDefinition
DeferredImportSelectorHandler.process()->
EnableConfigurationPropertiesRegistrar.registerBeanDefinitions()->

2.关键

实例化工厂对象时调用:ConfigurationPropertiesBindingPostProcessor.postProcessBeforeInitialization
判断并创建有@ConfigurationProperties的类:ConfigurationPropertiesBean.create
绑定属性:ConfigurationPropertiesBinder.bind

3.设计模式:
getBinder()多用方法做引用


4.数据结构:
CopyOnWriteArrayList
unmodifiableSet
5.优化:

6.命名:
MutablePropertySources
Validator
Binder
PropertySourcesDeducer
BindHandler
BindResult
PlaceholdersResolver
ConversionService
DataObjectBinder
